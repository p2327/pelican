<!DOCTYPE html>
<html lang="en">
<head>
        <title>pscripts - programming</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
        <link href="/" type="application/atom+xml" rel="alternate" title="pscripts ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie.css"/>
                <script src="/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie6.css"/><![endif]-->

</head>

<body>
	<div id="wrap" style="width:850px">
	    <div id="container" style="width:560px">


            <div class="entry">
        
        

            <header>
            <h1><a href="" id="site-title"> </a>  <a href="/streams.html" id="page-title">Streams</a></h1>
<time datetime="2020-03-19T00:00:00+00:00">Thu 19 March 2020</time>            </header>

            <article>
                <p>Today we are looking at streams, a way to represent sequential data <em>implicitly</em>. What is a stream? A stream is a lazily computed linked list.</p>
<p>Let's design a class to achieve this lazy evaluation: </p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Stream</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A lazily computed linked list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">class</span> <span class="nc">empty</span><span class="p">:</span>
            <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="s1">&#39;Stream.empty&#39;</span>
        <span class="n">empty</span> <span class="o">=</span> <span class="n">empty</span><span class="p">()</span>

        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">compute_rest</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">empty</span><span class="p">):</span>
            <span class="k">assert</span> <span class="n">callable</span><span class="p">(</span><span class="n">compute_rest</span><span class="p">),</span> <span class="s1">&#39;compute_rest must be callable.&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">first</span> <span class="o">=</span> <span class="n">first</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_compute_rest</span> <span class="o">=</span> <span class="n">compute_rest</span>

        <span class="nd">@property</span>
        <span class="k">def</span> <span class="nf">rest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Return the rest of the stream, </span>
<span class="sd">            computing it if necessary.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_rest</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_rest</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_rest</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_compute_rest</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest</span>
        <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;Stream(</span><span class="si">{0}</span><span class="s1">, &lt;...&gt;)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">first</span><span class="p">))</span>
</pre></div>


<p>We will use this to build a small program that calculates prime numbers.</p>
<p><em>TODO</em></p>            </article>
                <section id="article-list">
                    <h2>All posts</h2>
                    <ol>
        </ol>
        </section><!-- #article-list -->
        

 
            <li><a href="/dispatch.html" rel="bookmark" title="Permalink to Dispatch dictionaries">Dispatch dictionaries</a></li>
        </ol>
        </section><!-- #article-list -->
        

 
            <li><a href="/clicypher.html" rel="bookmark" title="Permalink to CLI cypher">CLI cypher</a></li>
        </ol>
        </section><!-- #article-list -->
        

 
            <li><a href="/lib.html" rel="bookmark" title="Permalink to Writing a Python library (Part 1)">Writing a Python library (Part 1)</a></li>
        </ol>
        </section><!-- #article-list -->
            </div>
        </div>


        <div id="sidebar">
            <!-- 
            <h1><a href=" " title="title">pscripts</a></h1>
            -->
            <h1><a href="/index.html" title="title">pscripts</a></h1>
            <span class="description"> </span>
            <!-- <span class="feed"><a href="">RSS</a> | <a href="">Atom</a></span> -->

            <form>
                <div class="tipue_search_group">
                <input type="text" name="q" id="tipue_search_input" pattern=".{3,}" title="At least 3 characters" required></div>
                <!--<button type="submit" class="tipue_search_button"><div class="tipue_search_icon">&#9906;</div></button>
                </div>-->
                </form>
                
                <div id="tipue_search_content"></div>

        </div>

        <div id="footer">
            <nav>
              <ul>
                <object align="right">
                    <li><a href="/categories.html">Categories</a></li>
                </object>
                </ul>
            </nav>
       
            <div id="credits">
                <!--<span>Adapted from <a href="http://wordpress.org/themes/monospace">Monospace</a> || Created with <a href="">Pelican</a></span>-->
                <object align="left"><span>Created with <a href="https://docs.getpelican.com/en/stable/">Pelican</a></span></object>
            </div>
                
        </div>


    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Tipue-Search/5.0.0/tipuesearch.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Tipue-Search/5.0.0/tipuesearch_set.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Tipue-Search/5.0.0/tipuesearch.css"/> 

    <script>
        $(document).ready(function() {
             $('#tipue_search_input').tipuesearch();
        });
        </script>

    <script src="tipuesearch_content.js"></script>


</body>
</html>